<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Installation - Sported</title>
</head>

<body>
    <div class="container">
        <?php
        if (isset($error)) :
            foreach ($error as $err) : ?>
                <div class="banner-error"><?= $err; ?></div>

        <?php endforeach;
        endif; ?>

        <div class="card">
            <?php if ($step === 0) : ?>
                <div class="img-resize">
                    <svg width="383" height="374" viewBox="0 0 383 374" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M379.995 154.289C381.942 164.902 383.077 175.832 382.996 187C382.996 191.356 382.672 195.554 382.347 199.831C341.793 239.987 285.503 264.936 223.374 264.936H159.541C116.391 264.936 78.1889 286.005 55.0729 318.161C47.4487 310.558 40.3922 302.241 34.1468 293.45C63.4271 257.095 108.686 233.73 159.622 233.73H223.455C288.18 233.73 345.28 202.286 379.995 154.289ZM159.622 202.603C103.17 202.603 52.5585 226.602 17.4384 264.54C12.5719 254.086 8.67865 243.155 5.75873 231.75C45.9076 194.445 100.007 171.397 159.622 171.397H223.455C282.745 171.397 332.627 131.557 346.903 77.9365C355.013 88.9458 362.07 100.747 367.585 113.341C341.955 166.09 287.125 202.603 223.455 202.603H159.622ZM159.622 109.064L223.455 108.905C258.656 108.905 287.288 80.9462 287.288 46.5718V25.1076C298.724 31.6023 309.43 39.2058 319.163 47.7598C318.514 98.8462 275.851 140.191 223.455 140.191H159.622C99.3583 140.191 44.1232 160.784 0.405544 194.92C0.324435 192.307 0 189.693 0 187C0 175.911 1.21663 165.219 3.08214 154.685C48.1787 125.934 101.873 109.064 159.622 109.064ZM159.622 77.8573C108.118 77.8573 59.615 90.1338 16.4651 111.44C46.232 45.859 113.39 0 191.579 0C213.965 0 235.378 3.96019 255.412 10.8509V46.651C255.412 63.8382 241.055 77.8573 223.455 77.8573H159.622ZM223.536 296.064C278.933 296.064 330.113 278.559 372.127 249.096C345.848 321.805 275.121 374 191.66 374C149.808 374 111.2 360.694 79.6489 338.438C96.7628 312.934 126.205 296.064 159.703 296.064H223.536Z" fill="#42A5F5" />
                    </svg>
                </div>
                <h2>Welcome to Sported!</h2>
                <p class="emph-text">
                    This is the installation page. Please fill in the following fields to install the application.
                </p>
                <button class="btn-primary">
                    <a href="./activate.php?db_init">Begin the installation</a>
                </button>
            <?php elseif ($step === 1) : ?>
                <div class="img-resize">
                    <svg width="383" height="374" viewBox="0 0 383 374" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M379.995 154.289C381.942 164.902 383.077 175.832 382.996 187C382.996 191.356 382.672 195.554 382.347 199.831C341.793 239.987 285.503 264.936 223.374 264.936H159.541C116.391 264.936 78.1889 286.005 55.0729 318.161C47.4487 310.558 40.3922 302.241 34.1468 293.45C63.4271 257.095 108.686 233.73 159.622 233.73H223.455C288.18 233.73 345.28 202.286 379.995 154.289ZM159.622 202.603C103.17 202.603 52.5585 226.602 17.4384 264.54C12.5719 254.086 8.67865 243.155 5.75873 231.75C45.9076 194.445 100.007 171.397 159.622 171.397H223.455C282.745 171.397 332.627 131.557 346.903 77.9365C355.013 88.9458 362.07 100.747 367.585 113.341C341.955 166.09 287.125 202.603 223.455 202.603H159.622ZM159.622 109.064L223.455 108.905C258.656 108.905 287.288 80.9462 287.288 46.5718V25.1076C298.724 31.6023 309.43 39.2058 319.163 47.7598C318.514 98.8462 275.851 140.191 223.455 140.191H159.622C99.3583 140.191 44.1232 160.784 0.405544 194.92C0.324435 192.307 0 189.693 0 187C0 175.911 1.21663 165.219 3.08214 154.685C48.1787 125.934 101.873 109.064 159.622 109.064ZM159.622 77.8573C108.118 77.8573 59.615 90.1338 16.4651 111.44C46.232 45.859 113.39 0 191.579 0C213.965 0 235.378 3.96019 255.412 10.8509V46.651C255.412 63.8382 241.055 77.8573 223.455 77.8573H159.622ZM223.536 296.064C278.933 296.064 330.113 278.559 372.127 249.096C345.848 321.805 275.121 374 191.66 374C149.808 374 111.2 360.694 79.6489 338.438C96.7628 312.934 126.205 296.064 159.703 296.064H223.536Z" fill="#42A5F5" />
                    </svg>
                </div>
                <div class="text-center">

                    <h3>We need to get some information from you to install the application.</h3>

                    <span>First, please enter the name of the database you want to use (default is <span class="highlight">sported</span>) :</span>
                    <form class="blue-text" action="activate.php" method="post">
                        <input type="text" name="db_name" value="sported" placeholder="Your database name" required />
                        <input type="hidden" name="db_init" value="true" />
                        <button class="btn-primary">Next</button>
                    </form>

                </div>
            <?php elseif ($step === 2) : ?>
                <div class="img-resize">
                    <svg width="383" height="374" viewBox="0 0 383 374" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M379.995 154.289C381.942 164.902 383.077 175.832 382.996 187C382.996 191.356 382.672 195.554 382.347 199.831C341.793 239.987 285.503 264.936 223.374 264.936H159.541C116.391 264.936 78.1889 286.005 55.0729 318.161C47.4487 310.558 40.3922 302.241 34.1468 293.45C63.4271 257.095 108.686 233.73 159.622 233.73H223.455C288.18 233.73 345.28 202.286 379.995 154.289ZM159.622 202.603C103.17 202.603 52.5585 226.602 17.4384 264.54C12.5719 254.086 8.67865 243.155 5.75873 231.75C45.9076 194.445 100.007 171.397 159.622 171.397H223.455C282.745 171.397 332.627 131.557 346.903 77.9365C355.013 88.9458 362.07 100.747 367.585 113.341C341.955 166.09 287.125 202.603 223.455 202.603H159.622ZM159.622 109.064L223.455 108.905C258.656 108.905 287.288 80.9462 287.288 46.5718V25.1076C298.724 31.6023 309.43 39.2058 319.163 47.7598C318.514 98.8462 275.851 140.191 223.455 140.191H159.622C99.3583 140.191 44.1232 160.784 0.405544 194.92C0.324435 192.307 0 189.693 0 187C0 175.911 1.21663 165.219 3.08214 154.685C48.1787 125.934 101.873 109.064 159.622 109.064ZM159.622 77.8573C108.118 77.8573 59.615 90.1338 16.4651 111.44C46.232 45.859 113.39 0 191.579 0C213.965 0 235.378 3.96019 255.412 10.8509V46.651C255.412 63.8382 241.055 77.8573 223.455 77.8573H159.622ZM223.536 296.064C278.933 296.064 330.113 278.559 372.127 249.096C345.848 321.805 275.121 374 191.66 374C149.808 374 111.2 360.694 79.6489 338.438C96.7628 312.934 126.205 296.064 159.703 296.064H223.536Z" fill="#42A5F5" />
                    </svg>
                </div>
                <div class="text-center">
                    <h3>Please enter the IP address and the port on which we can install your database.</h3>

                    <span>IPv4 format and port are required.</span>
                    <form class="blue-text dbhost" action="activate.php" method="post">
                        <input type="text" name="db_host" placeholder="XX.XX.XX.XX" required />
                        <input type="text" class="w-fit" name="db_port" placeholder="3306" required />
                        <button class="btn-primary">Next</button>
                    </form>
                </div>
            <?php elseif ($step === 3) : ?>
                <div class="img-resize">
                    <svg width="383" height="374" viewBox="0 0 383 374" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M379.995 154.289C381.942 164.902 383.077 175.832 382.996 187C382.996 191.356 382.672 195.554 382.347 199.831C341.793 239.987 285.503 264.936 223.374 264.936H159.541C116.391 264.936 78.1889 286.005 55.0729 318.161C47.4487 310.558 40.3922 302.241 34.1468 293.45C63.4271 257.095 108.686 233.73 159.622 233.73H223.455C288.18 233.73 345.28 202.286 379.995 154.289ZM159.622 202.603C103.17 202.603 52.5585 226.602 17.4384 264.54C12.5719 254.086 8.67865 243.155 5.75873 231.75C45.9076 194.445 100.007 171.397 159.622 171.397H223.455C282.745 171.397 332.627 131.557 346.903 77.9365C355.013 88.9458 362.07 100.747 367.585 113.341C341.955 166.09 287.125 202.603 223.455 202.603H159.622ZM159.622 109.064L223.455 108.905C258.656 108.905 287.288 80.9462 287.288 46.5718V25.1076C298.724 31.6023 309.43 39.2058 319.163 47.7598C318.514 98.8462 275.851 140.191 223.455 140.191H159.622C99.3583 140.191 44.1232 160.784 0.405544 194.92C0.324435 192.307 0 189.693 0 187C0 175.911 1.21663 165.219 3.08214 154.685C48.1787 125.934 101.873 109.064 159.622 109.064ZM159.622 77.8573C108.118 77.8573 59.615 90.1338 16.4651 111.44C46.232 45.859 113.39 0 191.579 0C213.965 0 235.378 3.96019 255.412 10.8509V46.651C255.412 63.8382 241.055 77.8573 223.455 77.8573H159.622ZM223.536 296.064C278.933 296.064 330.113 278.559 372.127 249.096C345.848 321.805 275.121 374 191.66 374C149.808 374 111.2 360.694 79.6489 338.438C96.7628 312.934 126.205 296.064 159.703 296.064H223.536Z" fill="#42A5F5" />
                    </svg>
                </div>
                <div class="text-center">
                    <h3>Please select your Database Management System.</h3>

                    <span>Select the corresponding one in the list (if yours is not on the list consult <a href="https://www.php.net/manual/en/pdo.drivers.php">the PHP documentation</a>).</span>
                    <form class="blue-text" action="activate.php" method="post">
                        <select name="db_driver" class="select-drivers">
                            <?php
                            foreach (pdo_drivers() as $driver) : ?>
                                <option value="<?php echo $driver; ?>"><?php echo $driver; ?></option>
                            <?php
                            endforeach;
                            ?>
                        </select>
                        <button class="btn-primary">Next</button>
                    </form>
                </div>
            <?php elseif ($step === 4) : ?>
                <div class="img-resize">
                    <svg width="383" height="374" viewBox="0 0 383 374" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M379.995 154.289C381.942 164.902 383.077 175.832 382.996 187C382.996 191.356 382.672 195.554 382.347 199.831C341.793 239.987 285.503 264.936 223.374 264.936H159.541C116.391 264.936 78.1889 286.005 55.0729 318.161C47.4487 310.558 40.3922 302.241 34.1468 293.45C63.4271 257.095 108.686 233.73 159.622 233.73H223.455C288.18 233.73 345.28 202.286 379.995 154.289ZM159.622 202.603C103.17 202.603 52.5585 226.602 17.4384 264.54C12.5719 254.086 8.67865 243.155 5.75873 231.75C45.9076 194.445 100.007 171.397 159.622 171.397H223.455C282.745 171.397 332.627 131.557 346.903 77.9365C355.013 88.9458 362.07 100.747 367.585 113.341C341.955 166.09 287.125 202.603 223.455 202.603H159.622ZM159.622 109.064L223.455 108.905C258.656 108.905 287.288 80.9462 287.288 46.5718V25.1076C298.724 31.6023 309.43 39.2058 319.163 47.7598C318.514 98.8462 275.851 140.191 223.455 140.191H159.622C99.3583 140.191 44.1232 160.784 0.405544 194.92C0.324435 192.307 0 189.693 0 187C0 175.911 1.21663 165.219 3.08214 154.685C48.1787 125.934 101.873 109.064 159.622 109.064ZM159.622 77.8573C108.118 77.8573 59.615 90.1338 16.4651 111.44C46.232 45.859 113.39 0 191.579 0C213.965 0 235.378 3.96019 255.412 10.8509V46.651C255.412 63.8382 241.055 77.8573 223.455 77.8573H159.622ZM223.536 296.064C278.933 296.064 330.113 278.559 372.127 249.096C345.848 321.805 275.121 374 191.66 374C149.808 374 111.2 360.694 79.6489 338.438C96.7628 312.934 126.205 296.064 159.703 296.064H223.536Z" fill="#42A5F5" />
                    </svg>
                </div>
                <div class="text-center">
                    <h3>Please enter a username and password for the database.</h3>

                    <span>We need to get access to a root account in order to create your database.</span>
                    <form class="blue-text user-fields" action="activate.php" method="post">
                        <input type="text" name="db_user" placeholder="Username" />
                        <input type="password" name="db_password" placeholder="Password" />
                        <button class="btn-primary">Next</button>
                    </form>
                </div>
            <?php elseif ($step === 5) : ?>
                <div class="img-resize">
                    <svg width="383" height="374" viewBox="0 0 383 374" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M379.995 154.289C381.942 164.902 383.077 175.832 382.996 187C382.996 191.356 382.672 195.554 382.347 199.831C341.793 239.987 285.503 264.936 223.374 264.936H159.541C116.391 264.936 78.1889 286.005 55.0729 318.161C47.4487 310.558 40.3922 302.241 34.1468 293.45C63.4271 257.095 108.686 233.73 159.622 233.73H223.455C288.18 233.73 345.28 202.286 379.995 154.289ZM159.622 202.603C103.17 202.603 52.5585 226.602 17.4384 264.54C12.5719 254.086 8.67865 243.155 5.75873 231.75C45.9076 194.445 100.007 171.397 159.622 171.397H223.455C282.745 171.397 332.627 131.557 346.903 77.9365C355.013 88.9458 362.07 100.747 367.585 113.341C341.955 166.09 287.125 202.603 223.455 202.603H159.622ZM159.622 109.064L223.455 108.905C258.656 108.905 287.288 80.9462 287.288 46.5718V25.1076C298.724 31.6023 309.43 39.2058 319.163 47.7598C318.514 98.8462 275.851 140.191 223.455 140.191H159.622C99.3583 140.191 44.1232 160.784 0.405544 194.92C0.324435 192.307 0 189.693 0 187C0 175.911 1.21663 165.219 3.08214 154.685C48.1787 125.934 101.873 109.064 159.622 109.064ZM159.622 77.8573C108.118 77.8573 59.615 90.1338 16.4651 111.44C46.232 45.859 113.39 0 191.579 0C213.965 0 235.378 3.96019 255.412 10.8509V46.651C255.412 63.8382 241.055 77.8573 223.455 77.8573H159.622ZM223.536 296.064C278.933 296.064 330.113 278.559 372.127 249.096C345.848 321.805 275.121 374 191.66 374C149.808 374 111.2 360.694 79.6489 338.438C96.7628 312.934 126.205 296.064 159.703 296.064H223.536Z" fill="#42A5F5" />
                    </svg>
                </div>
                <div class="text-center">
                    <h3>Final step! Please enter a prefix for your database.</h3>

                    <span>For security reason, a prefix will be appended to each table, you can pick it or we generate it randomly.</span>
                    <form class="blue-text" action="activate.php" method="post">
                        <input type="text" name="db_prefix" placeholder="abcd" minlength="4" maxlength="4" />
                        <button class="btn-primary">Next</button>
                    </form>
                </div>
            <?php elseif ($step === 6) : ?>
                <div class="img-resize">
                    <svg width="383" height="374" viewBox="0 0 383 374" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M379.995 154.289C381.942 164.902 383.077 175.832 382.996 187C382.996 191.356 382.672 195.554 382.347 199.831C341.793 239.987 285.503 264.936 223.374 264.936H159.541C116.391 264.936 78.1889 286.005 55.0729 318.161C47.4487 310.558 40.3922 302.241 34.1468 293.45C63.4271 257.095 108.686 233.73 159.622 233.73H223.455C288.18 233.73 345.28 202.286 379.995 154.289ZM159.622 202.603C103.17 202.603 52.5585 226.602 17.4384 264.54C12.5719 254.086 8.67865 243.155 5.75873 231.75C45.9076 194.445 100.007 171.397 159.622 171.397H223.455C282.745 171.397 332.627 131.557 346.903 77.9365C355.013 88.9458 362.07 100.747 367.585 113.341C341.955 166.09 287.125 202.603 223.455 202.603H159.622ZM159.622 109.064L223.455 108.905C258.656 108.905 287.288 80.9462 287.288 46.5718V25.1076C298.724 31.6023 309.43 39.2058 319.163 47.7598C318.514 98.8462 275.851 140.191 223.455 140.191H159.622C99.3583 140.191 44.1232 160.784 0.405544 194.92C0.324435 192.307 0 189.693 0 187C0 175.911 1.21663 165.219 3.08214 154.685C48.1787 125.934 101.873 109.064 159.622 109.064ZM159.622 77.8573C108.118 77.8573 59.615 90.1338 16.4651 111.44C46.232 45.859 113.39 0 191.579 0C213.965 0 235.378 3.96019 255.412 10.8509V46.651C255.412 63.8382 241.055 77.8573 223.455 77.8573H159.622ZM223.536 296.064C278.933 296.064 330.113 278.559 372.127 249.096C345.848 321.805 275.121 374 191.66 374C149.808 374 111.2 360.694 79.6489 338.438C96.7628 312.934 126.205 296.064 159.703 296.064H223.536Z" fill="#42A5F5" />
                    </svg>
                </div>
                <div class="text-center">
                    <h3>Final touch, please give us your fantastic site name (it will be displayed to users) :</h3>

                    <form class="blue-text" action="install.php" method="post">
                        <input type="text" name="site_name" placeholder="Site name" required />
                        <button class="btn-primary">Next</button>
                    </form>

                </div>

            <?php elseif ($step === 7) : ?>
                <div class="img-resize">
                    <svg width="383" height="374" viewBox="0 0 383 374" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M379.995 154.289C381.942 164.902 383.077 175.832 382.996 187C382.996 191.356 382.672 195.554 382.347 199.831C341.793 239.987 285.503 264.936 223.374 264.936H159.541C116.391 264.936 78.1889 286.005 55.0729 318.161C47.4487 310.558 40.3922 302.241 34.1468 293.45C63.4271 257.095 108.686 233.73 159.622 233.73H223.455C288.18 233.73 345.28 202.286 379.995 154.289ZM159.622 202.603C103.17 202.603 52.5585 226.602 17.4384 264.54C12.5719 254.086 8.67865 243.155 5.75873 231.75C45.9076 194.445 100.007 171.397 159.622 171.397H223.455C282.745 171.397 332.627 131.557 346.903 77.9365C355.013 88.9458 362.07 100.747 367.585 113.341C341.955 166.09 287.125 202.603 223.455 202.603H159.622ZM159.622 109.064L223.455 108.905C258.656 108.905 287.288 80.9462 287.288 46.5718V25.1076C298.724 31.6023 309.43 39.2058 319.163 47.7598C318.514 98.8462 275.851 140.191 223.455 140.191H159.622C99.3583 140.191 44.1232 160.784 0.405544 194.92C0.324435 192.307 0 189.693 0 187C0 175.911 1.21663 165.219 3.08214 154.685C48.1787 125.934 101.873 109.064 159.622 109.064ZM159.622 77.8573C108.118 77.8573 59.615 90.1338 16.4651 111.44C46.232 45.859 113.39 0 191.579 0C213.965 0 235.378 3.96019 255.412 10.8509V46.651C255.412 63.8382 241.055 77.8573 223.455 77.8573H159.622ZM223.536 296.064C278.933 296.064 330.113 278.559 372.127 249.096C345.848 321.805 275.121 374 191.66 374C149.808 374 111.2 360.694 79.6489 338.438C96.7628 312.934 126.205 296.064 159.703 296.064H223.536Z" fill="#42A5F5" />
                    </svg>
                </div>
                <div class="text-center">
                    <h3>Hey! It works! Congratulations, now create your superadmin account (email and password only):</h3>

                    <form class="blue-text user-fields" action="install.php" method="post">
                        <input type="email" name="email" placeholder="Email" />
                        <input type="password" name="password" placeholder="Password" />
                        <button class="btn-primary">Complete</button>
                    </form>

                </div>
            <?php endif; ?>
        </div>
    </div>
</body>

</html>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap');

    body {
        margin: auto;
    }

    .container {
        display: flex;
        flex-direction: column;
        font-family: Mulish, sans-serif;
        background: #42A5F5;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    .card {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 1rem;
        justify-content: center;
        width: 20%;
        height: 40%;
        background: #fff;
        border-radius: 2em;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    }

    .card h2 {
        color: #0077C2;
    }

    .emph-text {
        text-align: center;
        font-weight: 200;

    }

    .img-resize {
        height: 20%
    }

    .img-resize svg {
        height: 100%;
        width: auto;
    }

    .btn-primary {
        border: none;
        background: #0077C2;
        color: white;
        cursor: pointer;
        border-radius: 1rem;
        padding: 1rem;
        transition: 200ms ease-in-out;
    }

    .btn-primary:hover {
        border: none;
        background: #42A5F5;
        transition: 200ms ease-in-out;
    }

    .btn-primary a {
        color: #fff;
        text-decoration: none;
        width: 100%;
        height: 100%;

    }

    .highlight {
        color: #0077C2;
        font-weight: bold;
    }

    .text-center {
        text-align: center;
        height: inherit;
    }

    .text-center form {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .blue-text>input {
        padding: 1rem;
        font-weight: 800;
        font-family: Roboto, sans-serif;
        color: #007cab;
        margin: 1rem;
    }

    .banner-error {
        width: 100%;
        display: flex;
        justify-content: center;
        height: 10%;
        background: #FF7171;
        color: white;
        font-size: larger;
        font-weight: bold;
        align-items: center;
        position: absolute;
        top: 0;
    }

    .dbhost {
        display: flex;
        flex-direction: row !important;
        flex-wrap: wrap;
        justify-content: center;
    }

    .w-fit {
        width: 5rem;
    }

    .select-drivers {
        font-size: large;
        margin: 2rem;
    }

    .user-fields {
        flex-direction: row !important;
        align-items: center !important;
        flex-wrap: wrap;
        justify-content: center;
    }
</style>